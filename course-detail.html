<!DOCTYPE html>
<html>
<head>
  <title>Course Detail</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    h1 { margin-bottom: 10px; }
    .lesson a { display: block; background: #0073e6; color: white; padding: 10px; margin: 10px 0; text-decoration: none; border-radius: 4px; }
  </style>
</head>
<body>
  <h1 id="title">Loading course...</h1>
  <p id="description"></p>
  <div id="lessons">Loading lessons...</div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const courseId = parseInt(urlParams.get('courseId'));

    fetch('data/courses.json')
      .then(res => res.json())
      .then(courses => {
        const course = courses.find(c => c.id === courseId);
        if (course) {
          document.getElementById('title').textContent = course.title;
          document.getElementById('description').textContent = course.description || '';
        } else {
          document.getElementById('title').textContent = 'Course not found';
        }
      });

    fetch('data/lessons.json')
      .then(res => res.json())
      .then(allLessons => {
        const match = allLessons.find(item => item.course_id === courseId);
        const container = document.getElementById('lessons');
        container.innerHTML = '';
        (match?.lessons || []).forEach(lesson => {
          container.innerHTML += \`
            <div class="lesson">
              <a href="lesson.html?lessonId=\${lesson.id}">\${lesson.name}</a>
            </div>
          \`;
        });
      });
  </script>
</body>
</html>
